# Ansible Lint configuration for homelab k3s cluster

# Exclude specific paths
exclude_paths:
  - .cache/
  - .github/
  - kubernetes/
  - docs/
  - scripts/

# Enable offline mode
offline: false

# Use default rules but with customizations
use_default_rules: true

# Skip specific rules that may not apply to our use case
skip_list:
  - yaml[line-length]           # Allow longer lines for readability
  - name[casing]               # Allow flexible naming conventions
  - fqcn[action-core]          # Allow core module names without FQCN
  - risky-file-permissions     # We set permissions explicitly where needed
  - command-instead-of-module  # Some commands are necessary for k3s setup
  - no-changed-when            # Some tasks legitimately change system state
  - args[module]               # Skip args validation for community collection modules

# Mock modules and plugins that may not be available in CI
mock_modules:
  - kubernetes.core.k8s
  - kubernetes.core.k8s_info
  - community.general.ufw
  - community.general.timezone
  - community.general.locale_gen
  - community.general.modprobe
  - community.general.kernel_blacklist
  - ansible.posix.mount
  - ansible.posix.sysctl

mock_roles:
  - common
  - k3s_common

# Tags to run
tags: []

# Verbosity level
verbosity: 1